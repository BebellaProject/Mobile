/*! bebella 2016-07-02 */
function view(a){return"views/"+a+".html"}function api_v1(a){return APP_URL+"/api/v1/"+a}function attr(a,b){for(var c in b)"created_at"==c||"updated_at"==c?a[c]=moment(b[c]).fromNow():c.startsWith("has_")||c.startsWith("is_")||c.startsWith("used_for_")?a[c]=1===b[c]:a[c]=b[c]}var Bebella=angular.module("Bebella",["ionic","angularMoment"]),APP_URL="http://localhost:8000";Bebella.run(["$ionicPlatform","amMoment",function(a,b){b.changeLocale("pt-br"),a.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]),Bebella.factory("Recipe",[function(){var a=function(){this.tags=new Array,this.steps=new Array,this.products=new Array,this.comments=new Array,this.related=new Array};return a}]),Bebella.service("RecipeRepository",["$http","$q","Recipe",function(a,b,c){var d=this;d.find=function(d){var e=b.defer();return a.get(api_v1("recipe/find/"+d)).then(function(a){var b=new c;attr(b,a.data),e.resolve(b)},function(a){e.reject(a)}),e.promise},d.all=function(){var d=b.defer();return a.get(api_v1("recipe/all")).then(function(a){var b=_.map(a.data,function(a){var b=new c;return attr(b,a),b});d.resolve(b)},function(a){d.reject(a)}),d.promise},d.edit=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("recipe/edit"),e).then(function(a){d.resolve(c)},function(a){d.reject(a)}),d.promise},d.save=function(c){var d=b.defer(),e=JSON.stringify(c);return a.post(api_v1("recipe/save"),e).then(function(a){c.id=a.data.id,d.resolve(c)},function(a){d.reject(a)}),d.promise}}]),Bebella.controller("IndexCtrl",["$scope","RecipeRepository",function(a,b){a.appUrl=APP_URL,b.all().then(function(b){a.recipes=b,console.log(b)},function(a){alert("Houve um erro na obtenção da lista de receitas")})}]),Bebella.controller("RecipeIndexCtrl",["$scope","$stateParams","RecipeRepository",function(a,b,c){a.appUrl=APP_URL,c.find(b.recipeId).then(function(b){a.recipe=b,console.log(b)},function(a){alert("Erro ao obter os detalhes da receita")})}]),Bebella.controller("SubscriptionIndexCtrl",["$scope",function(a){}]),Bebella.controller("TrendingIndexCtrl",["$scope",function(a){}]),Bebella.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/tabs/home"),a.state("tabs",{url:"/tabs",templateUrl:view("tabs"),"abstract":!0}).state("tabs.home",{url:"/home",views:{tab1:{templateUrl:view("home/index"),controller:"IndexCtrl"}}}).state("tabs.trending",{url:"/trending",views:{tab2:{templateUrl:view("trending/index"),controller:"TrendingIndexCtrl"}}}).state("tabs.subscriptions",{url:"/subscriptions",views:{tab3:{templateUrl:view("subscription/index"),controller:"SubscriptionIndexCtrl"}}}).state("recipe",{url:"/recipe/{recipeId}",templateUrl:view("recipe/index"),controller:"RecipeIndexCtrl"})}]);